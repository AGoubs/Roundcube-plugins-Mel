"addressbook"==rcmail.env.task&&$(document).on("keyup","input#quicksearchbox",function(e){if("plugin.annuaire"==rcmail.env.action)var a=$("#annuaire-list li.object");else a=$("#contacts-table tr.contact");var t=$(this).val().toLowerCase();a.show(),a.each(function(){if("plugin.annuaire"==rcmail.env.action)var e=$(this).find("> span.name");else e=$(this).find("> td.name");1<t.length?0<=e.text().toLowerCase().indexOf(t)?(e.html(e.text()),e.html(e.text().replace(new RegExp(t,"gi"),"<strong>$&</strong>"))):(e.html(e.text()),$(this).hide()):e.html(e.text())})}),window.rcmail&&rcmail.addEventListener("init",function(e){if("addressbook"==rcmail.env.task&&($("#directorylist-header").text(rcmail.get_label("mel_larry.allannuaires")),$('<li class="legend"><span>'+rcmail.get_label("mel_larry.personalannuaire")+"</span></li>").insertAfter("#directorylist li.all")),"addressbook"==rcmail.env.task&&"plugin.annuaire"==rcmail.env.action)$("#quicksearchbox").attr("placeholder",rcmail.get_label("mel_larry.search_in")+" "+$("#directorylist li.addressbook.selected > a").text());else if("calendar"==rcmail.env.task)$("#quicksearchbox").attr("placeholder",rcmail.get_label("mel_larry.search_in_calendars"));else if("tasks"==rcmail.env.task)$("#quicksearchbox").attr("placeholder",rcmail.get_label("mel_larry.search_in_tasks"));else if("settings"==rcmail.env.task&&!rcmail.env.courrielleur){var a=$("<div>");a.attr("class","disconnect");var t=$("<a>");t.attr("href","./?_task=logout"),t.attr("onclick","return rcmail.command('switch-task','logout',this,event)"),t.text(rcmail.get_label("mel.logout")),a.append(t),$("#settings-sections").append(a)}}),rcmail.addEventListener("actionafter",function(e){if("list"==e.action&&"mail"==rcmail.env.task)$("#searchmenu-menu #s_scope_all").is(":checked")?$("#quicksearchbox").attr("placeholder",rcmail.get_label("mel_larry.search_in_all_folders")):$("#quicksearchbox").attr("placeholder",rcmail.get_label("mel_larry.search_in")+" "+$("#folderlist-content #mailboxlist li.mailbox.selected > a").clone().children().remove().end().text());else if("list"==e.action&&"addressbook"==rcmail.env.task){rcmail.set_searchscope("list");var a=$("#directorylist li.addressbook.selected > a").clone().children().remove().end().text();$("#quicksearchbox").attr("placeholder",rcmail.get_label("mel_larry.search_in")+" "+a)}}),rcmail.addEventListener("responseaftersearch",function(e){if("addressbook"==rcmail.env.task&&(""==e.response.env.source||!e.response.env.source)){var a=new Object;$("#contacts-table tr").each(function(){var e=$(this).attr("id").split(/-(.+)/)[1];e&&!a[e]&&(a[e]=$(this).attr("id"))});var t=!0;for(var r in a){var l=rcmail.get_label("mel_larry.foundin")+" "+$("#directorylist li#rcmli"+rcmail.html_identifier_encode(r)+" > a").clone().children().remove().end().text();t||$('<tr class="space"><td>&nbsp;</td></tr>').insertBefore("tr#"+a[r]),$('<tr class="legend"><td>'+l+"</td></tr>").insertBefore("tr#"+a[r]),t=!1}}});